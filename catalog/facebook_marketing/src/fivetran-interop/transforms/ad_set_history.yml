domain: facebook_marketing.fivetran-interop
transforms:
  - display_name: Each record in this table reflects a version of a Facebook ad set.
    id: ad_set_history
    from:
      - ad_sets: facebook_marketing.ad_sets
    fields:
      id:
        expression: ad_sets.id
        description: The ID of the ad set.
      account_id:
        expression: ad_sets.account_id
        description: The ID of the ad account that this ad set belongs to.
      campaign_id:
        expression: ad_sets.campaign_id
        description: Ad campaign that contains this ad set.
      name:
        expression: ad_sets.name
        description: The name of the ad set.
      _fivetran_synced:
        expression: _airbyte_extracted_at
        description: "{{ doc('_fivetran_synced') }}"
      updated_time:
        expression: ad_sets.updated_time
        description: "{{ doc('updated_time') }}"
      start_time:
        expression: ad_sets.start_time
        description: Timestamp of designated ad set start time.
      end_time:
        expression: ad_sets.end_time
        description: Timestamp of designated ad set end time.
      bid_strategy:
        expression: ad_sets.bid_strategy
        description:
          Bid strategy values are - 'LOWEST_COST_WITHOUT_CAP', 'LOWEST_COST_WITH_BID_CAP',
          'COST_CAP', 'LOWEST_COST_WITH_MIN_ROAS'.
      daily_budget:
        expression: ad_sets.daily_budget
        description: Daily budget of ad set.
      budget_remaining:
        expression: ad_sets.budget_remaining
        description: Remaining budget of ad set.
      status:
        expression: MISSING
        description: Status values are - 'ACTIVE', 'PAUSED', 'DELETED', 'ARCHIVED'.
      optimization_goal:
        expression: MISSING
        description:
          The optimization goal this ad set is using. Possible values defined
          [here](https://developers.facebook.com/docs/marketing-api/reference/ad-campaign/#fields).
    annotations:
      unused_source_fields:
        ad_sets:
          - promoted_object
          - created_time
          - lifetime_budget
          - targeting
          - bid_info
          - bid_amount
          - bid_constraints
          - adlabels
          - learning_stage_info
          - effective_status
          - _airbyte_meta
          - _airbyte_raw_id
