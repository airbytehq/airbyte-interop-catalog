domain: facebook_marketing.fivetran-interop
transforms:
  - name: basic_ad_actions
    from:
      - ads_insights: facebook_marketing.ads_insights
    fields:
      _1_d_view:
        expression: MISSING
        description: Conversion metric value using an attribution window of "1 day
          after viewing the ad". Not included in downstream models by default, but
          can be added using the `facebook_ads__basic_ad_actions_passthrough_metrics`
          var.
      _7_d_click:
        expression: MISSING
        description: Conversion metric value using an attribution window of "7 days
          after clicking the ad". Not included in downstream models by default, but
          can be added using the `facebook_ads__basic_ad_actions_passthrough_metrics`
          var.
      _28_d_click:
        expression: MISSING
        description: Conversion metric value using an attribution window of "28 days
          after clicking the ad". Deprecated by Facebook due to digital privacy initiatives.
          Not included in downstream models by default, but can be added using the
          `facebook_ads__basic_ad_actions_passthrough_metrics` var.
      _fivetran_id:
        expression: MISSING
        description: Defunct field.
      _fivetran_synced:
        expression: ads_insights._airbyte_extracted_at
        description: "{{ doc('_fivetran_synced') }}"
      action_type:
        expression: ads_insights.actions
        description: "The kind of actions taken on your ad, Page, app or event after
          your ad was served to someone, even if they didn't click on it. Action types
          include Page likes, app installs, conversions, event responses and more.
          Actions prepended by app_custom_event come from mobile app events and actions
          prepended by offsite_conversion come from the Facebook Pixel.\n"
      ad_id:
        expression: ads_insights.ad_id
        description: The ID of the ad the report relates to.
      date:
        expression: ads_insights.date_start
        description: The date of the reported performance.
      index:
        expression: MISSING
        description: Index reflecting the `action_type` tracked for this ad on this
          day. Column of not much consequence.
      inline:
        expression: MISSING
        description: Conversion metric value using the attribution window that occurs
          on the ad itself. Not included in downstream models by default, but can
          be added using the `facebook_ads__basic_ad_actions_passthrough_metrics`
          var.
      value:
        expression: MISSING
        description: Conversion metric value using the default attribution window.
annotations:
  approved: false
  missing_fields:
    - _1_d_view
    - _28_d_click
    - _7_d_click
    - _fivetran_id
    - index
    - inline
    - value
  evaluation:
    source_stream_name: ads_insights
    target_table_name: basic_ad_actions
    table_match_score: 0.65
    completion_score: 0.36363636363636365
    explanation: The table match score reflects a moderate confidence that the source
      and target tables describe the same subject matter, particularly due to a standard
      mapping found for _fivetran_synced. Several fields are marked 'MISSING' due
      to lack of matches, lowering the completion score.
    field_mapping_evals:
      - name: _1_d_view
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: _7_d_click
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: _28_d_click
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: _fivetran_id
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: _fivetran_synced
        expression: ads_insights._airbyte_extracted_at
        score: 1.0
        explanation: Standard mapping for _fivetran_synced to _airbyte_extracted_at.
      - name: action_type
        expression: ads_insights.actions
        score: 0.7
        explanation: Mapped to ads_insights.actions, reflecting a likely but not certain
          match based on contextual semantics.
      - name: ad_id
        expression: ads_insights.ad_id
        score: 0.6
        explanation: Mapped to ads_insights.ad_id, indicating a probable mapping based
          on naming consistency.
      - name: date
        expression: ads_insights.date_start
        score: 0.6
        explanation: Mapped to ads_insights.date_start, signifying a probable mapping
          based on naming consistency.
      - name: index
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: inline
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: value
        expression: MISSING
        score: 0.0
        explanation: No good match found.
