domain: shopify.fivetran-interop
transforms:
  - name: order
    from:
      - orders: shopify.orders
    fields:
      _fivetran_synced:
        expression: orders._airbyte_extracted_at
        description: "{{ doc('_fivetran_synced') }}"
      app_id:
        expression: orders.app_id
        description: The ID of the app that created the order.
      billing_address_address_1:
        expression: orders.billing_address.address1
        description: The street address of the billing address.
      billing_address_address_2:
        expression: orders.billing_address.address2
        description: An optional additional field for the street address of the billing
          address.
      billing_address_city:
        expression: orders.billing_address.city
        description: The city, town, or village of the billing address.
      billing_address_company:
        expression: orders.billing_address.company
        description: The company of the person associated with the billing address.
      billing_address_country:
        expression: orders.billing_address.country
        description: The name of the country of the billing address.
      billing_address_country_code:
        expression: orders.billing_address.country_code
        description: The two-letter code (ISO 3166-1 format) for the country of the
          billing address.
      billing_address_first_name:
        expression: orders.billing_address.first_name
        description: The first name of the person associated with the payment method.
      billing_address_last_name:
        expression: orders.billing_address.last_name
        description: The last name of the person associated with the payment method.
      billing_address_latitude:
        expression: orders.billing_address.latitude
        description: The latitude of the billing address.
      billing_address_longitude:
        expression: orders.billing_address.longitude
        description: The longitude of the billing address.
      billing_address_name:
        expression: orders.billing_address.name
        description: The full name of the person associated with the payment method.
      billing_address_phone:
        expression: orders.billing_address.phone
        description: The phone number at the billing address.
      billing_address_province:
        expression: orders.billing_address.province
        description: The name of the region (province, state, prefecture, …) of the
          billing address.
      billing_address_province_code:
        expression: orders.billing_address.province_code
        description: The two-letter abbreviation of the region of the billing address.
      billing_address_zip:
        expression: orders.billing_address.zip
        description: The postal code (zip, postcode, Eircode, …) of the billing address.
      browser_ip:
        expression: orders.browser_ip
        description: The IP address of the browser used by the customer when they
          placed the order.
      buyer_accepts_marketing:
        expression: orders.buyer_accepts_marketing
        description: Whether the customer consented to receive email updates from
          the shop.
      cancel_reason:
        expression: orders.cancel_reason
        description: The reason why the order was canceled.
      cancelled_at:
        expression: orders.cancelled_at
        description: The date and time when the order was canceled.
      cart_token:
        expression: orders.cart_token
        description: The ID of the cart that's associated with the order.
      closed_at:
        expression: orders.closed_at
        description: The date and time when the order was closed (archived).
      created_at:
        expression: orders.created_at
        description: The autogenerated date and time when the order was created in
          Shopify.
      currency:
        expression: orders.currency
        description: The three-letter code for the shop currency.
      customer_id:
        expression: MISSING
        description: The ID of the order's customer.
      email:
        expression: orders.email
        description: The customer's email address.
      financial_status:
        expression: orders.financial_status
        description: The status of payments associated with the order. Can only be
          set when the order is created
      fulfillment_status:
        expression: orders.fulfillment_status
        description: The order's status in terms of fulfilled line items.
      id:
        expression: orders.id
        description: The ID of the order, used for API purposes. This is different
          from the order_number property, which is the ID used by the shop owner and
          customer.
      landing_site_base_url:
        expression: orders.landing_site
        description: The URL for the page where the buyer landed when they entered
          the shop.
      location_id:
        expression: orders.location_id
        description: The ID of the physical location where the order was processed.
      name:
        expression: orders.name
        description: The order name, generated by combining the order_number property
          with the order prefix and suffix that are set in the merchant's general
          settings.
      note:
        expression: orders.note
        description: An optional note that a shop owner can attach to the order.
      number:
        expression: orders.number
        description: The order's position in the shop's count of orders. Numbers are
          sequential and start at 1.
      order_number:
        expression: orders.order_number
        description: The order 's position in the shop's count of orders starting
          at 1001. Order numbers are sequential and start at 1001.
      processed_at:
        expression: orders.processed_at
        description: The date and time when an order was processed. This value is
          the date that appears on your orders and that's used in the analytic reports.
      referring_site:
        expression: orders.referring_site
        description: The website where the customer clicked a link to the shop.
      shipping_address_address_1:
        expression: orders.shipping_address.address1
        description: The street address of the shipping address.
      shipping_address_address_2:
        expression: orders.shipping_address.address2
        description: An optional additional field for the street address of the shipping
          address.
      shipping_address_city:
        expression: orders.shipping_address.city
        description: The city, town, or village of the shipping address.
      shipping_address_company:
        expression: orders.shipping_address.company
        description: The company of the person associated with the shipping address.
      shipping_address_country:
        expression: orders.shipping_address.country
        description: The name of the country of the shipping address.
      shipping_address_country_code:
        expression: orders.shipping_address.country_code
        description: The two-letter code (ISO 3166-1 format) for the country of the
          shipping address.
      shipping_address_first_name:
        expression: orders.shipping_address.first_name
        description: The first name of the person associated with the shipping address.
      shipping_address_last_name:
        expression: orders.shipping_address.last_name
        description: The last name of the person associated with the shipping address.
      shipping_address_latitude:
        expression: orders.shipping_address.latitude
        description: The latitude of the shipping address.
      shipping_address_longitude:
        expression: orders.shipping_address.longitude
        description: The longitude of the shipping address.
      shipping_address_name:
        expression: orders.shipping_address.name
        description: The full name of the person associated with the payment method.
      shipping_address_phone:
        expression: orders.shipping_address.phone
        description: The phone number at the shipping address.
      shipping_address_province:
        expression: orders.shipping_address.province
        description: The name of the region (province, state, prefecture, …) of the
          shipping address.
      shipping_address_province_code:
        expression: orders.shipping_address.province_code
        description: The two-letter abbreviation of the region of the shipping address.
      shipping_address_zip:
        expression: orders.shipping_address.zip
        description: The postal code (zip, postcode, Eircode, …) of the shipping address.
      source_name:
        expression: orders.source_name
        description: Where the order originated. Can be set only during order creation,
          and is not writeable afterwards.
      subtotal_price:
        expression: orders.subtotal_price
        description: The price of the order in the shop currency after discounts but
          before shipping, taxes, and tips in the shop currency.
      taxes_included:
        expression: orders.taxes_included
        description: Whether taxes are included in the order subtotal.
      test:
        expression: orders.test
        description: Whether this is a test order.
      token:
        expression: orders.token
        description: A unique token for the order.
      total_discounts:
        expression: orders.total_discounts
        description: The total discounts applied to the price of the order in the
          shop currency.
      total_line_items_price:
        expression: orders.total_line_items_price
        description: The sum of all line item prices in the shop currency.
      total_price:
        expression: orders.total_price
        description: The sum of all line item prices, discounts, shipping, taxes,
          and tips in the shop currency. Must be positive.
      total_tax:
        expression: orders.total_tax
        description: The sum of all the taxes applied to the order in th shop currency.
          Must be positive.
      total_weight:
        expression: orders.total_weight
        description: The sum of all line item weights in grams.
      updated_at:
        expression: orders.updated_at
        description: The date and time (ISO 8601 format) when the order was last modified.
      user_id:
        expression: orders.user_id
        description: The ID of the user logged into Shopify POS who processed the
          order, if applicable.
      checkout_token:
        expression: orders.checkout_token
        description: A unique value when referencing the checkout that's associated
          with the order.
      confirmed:
        expression: MISSING
        description: Whether inventory has been reserved for the order.
      customer_locale:
        expression: orders.customer_locale
        description: A two-letter or three-letter language code, optionally followed
          by a region modifier.
      checkout_id:
        expression: orders.checkout_id
        description: ID of the order's checkout.
      order_status_url:
        expression: orders.order_status_url
        description: The URL pointing to the order status web page, if applicable.
      _fivetran_deleted:
        expression: MISSING
        description: "{{ doc('_fivetran_deleted') }}"
      total_tip_received:
        expression: orders.total_tip_received
        description: The sum of all the tips in the order in the shop currency.
      device_id:
        expression: orders.device_id
        description: The ID for the device.
      presentment_currency:
        expression: MISSING
        description: The presentment currency that was used to display prices to the
          customer.
      total_shipping_price_set:
        expression: orders.total_shipping_price_set
        description: The total shipping price of the order, excluding discounts and
          returns, in shop and presentment currencies. If taxes_included is set to
          true, then total_shipping_price_set includes taxes.
      client_details_user_agent:
        expression: orders.client_details.user_agent
        description: Details of the browsing client, including software and operating
          versions.
      total_tax_set:
        expression: orders.total_tax_set
        description: The total tax applied to the order in shop and presentment currencies.
      total_discounts_set:
        expression: orders.total_discounts_set
        description: The total discounts applied to the price of the order in shop
          and presentment currencies.
      total_line_items_price_set:
        expression: orders.total_line_items_price_set
        description: The total of all line item prices in shop and presentment currencies.
      total_price_set:
        expression: orders.total_price_set
        description: The total price of the order in shop and presentment currencies.
      is_confirmed:
        expression: orders.confirmed
        description: Whether the order is confirmed.
      source_identifier:
        expression: orders.source_identifier
        description: The ID of the order placed on the originating platform. This
          value doesn't correspond to the Shopify ID that's generated from a completed
          draft.
annotations:
  approved: false
  missing_fields:
    - _fivetran_deleted
    - confirmed
    - customer_id
    - presentment_currency
  evaluation:
    source_stream_name: orders
    target_table_name: order
    table_match_score: 0.95
    completion_score: 0.85
    explanation: The table mapping is evaluated to have a high table match score due
      to the comprehensive outline of field mappings that are appropriately correlated
      with reasonable confidence to the target schema. However, there are fields with
      'MISSING' expressions which moderately reduce the completion score as they indicate
      where the source schema lacks equivalent or meaningful matches.
    field_mapping_evals:
      - name: _fivetran_synced
        expression: orders._airbyte_extracted_at
        score: 1.0
        explanation: The '_fivetran_synced' is mapped to the source stream's '_airbyte_extracted_at'
          column, which is a standard mapping and always gets a score of 1.00.
      - name: app_id
        expression: orders.app_id
        score: 0.7
        explanation: The 'app_id' field is mapped directly to 'orders.app_id', which
          is correct given the context provided.
      - name: customer_id
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: confirmed
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: presentment_currency
        expression: MISSING
        score: 0.0
        explanation: No good match found.
