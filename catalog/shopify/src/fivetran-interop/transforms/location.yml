domain: shopify.fivetran-interop
transforms:
  - name: location
    from:
      - locations: shopify.locations
    fields:
      _fivetran_deleted:
        expression: MISSING
        description: "{{ doc('_fivetran_deleted') }}"
      _fivetran_synced:
        expression: locations._airbyte_extracted_at
        description: "{{ doc('_fivetran_synced') }}"
      active:
        expression: locations.active
        description:
          "Boolean representing whether the location is active. If true,
          then the location can be used to sell products, stock inventory, and fulfill
          orders.\n"
      address_1:
        expression: locations.address1
        description: The location's street address.
      address_2:
        expression: locations.address2
        description: The optional second line of the location's street address.
      city:
        expression: locations.city
        description: The city the location is in.
      country:
        expression: locations.country
        description: The country the location is in (two-letter code).
      country_code:
        expression: locations.country_code
        description:
          The two-letter code (ISO 3166-1 alpha-2 format) corresponding
          to country the location is in.
      country_name:
        expression: locations.country_name
        description: Full name of the location's country.
      created_at:
        expression: locations.created_at
        description: The date and time (ISO 8601 format) when the location was created.
      id:
        expression: locations.id
        description: The ID of the location.
      legacy:
        expression: locations.legacy
        description:
          "Boolean representing whether this is a fulfillment service location.
          If true, then the location is a fulfillment service location.  If false,
          then the location was created by the merchant and isn't tied to a fulfillment
          service.\n"
      localized_country_name:
        expression: locations.localized_country_name
        description: The localized name of the location's country.
      localized_province_name:
        expression: locations.localized_province_name
        description:
          The localized name of the location's region. Typically a province,
          state, or district.
      name:
        expression: locations.name
        description: The name of the location.
      phone:
        expression: locations.phone
        description:
          The phone number of the location. This value can contain special
          characters, such as - or +.
      province:
        expression: locations.province
        description: The province, state, or district of the location.
      province_code:
        expression: locations.province_code
        description:
          The province, state, or district code (ISO 3166-2 alpha-2 format)
          of the location.
      updated_at:
        expression: locations.updated_at
        description:
          The date and time (ISO 8601 format) when the location was last
          updated.
      zip:
        expression: locations.zip
        description: The zip or postal code.
annotations:
  approved: false
  missing_fields:
    - _fivetran_deleted
  evaluation:
    source_stream_name: locations
    target_table_name: location
    name_match_score: 0.9
    score: 0.63
    explanation:
      Overall fairly confident with mappings, except for those marked 'MISSING'.
      The mapping `_fivetran_synced` is perfectly mapped to `locations._airbyte_extracted_at`.
      However, `_fivetran_deleted` lacks a proper source expression.
    field_mapping_evals:
      - name: _fivetran_deleted
        expression: MISSING
        score: 0.0
        explanation:
          Expression is marked as 'MISSING', cannot determine a meaningful
          mapping.
      - name: _fivetran_synced
        expression: locations._airbyte_extracted_at
        score: 1.0
        explanation: Perfect mapping to source stream's `_airbyte_extracted_at` column.
      - name: active
        expression: locations.active
        score: 0.8
        explanation: Mapping expression seems matching the field context closely.
      - name: address_1
        expression: locations.address1
        score: 0.9
        explanation: Directly and clearly maps to the location's street address.
      - name: address_2
        expression: locations.address2
        score: 0.9
        explanation:
          Directly maps to the optional second line of the location's street
          address.
      - name: city
        expression: locations.city
        score: 0.85
        explanation: Directly maps to the city of the location.
      - name: country
        expression: locations.country
        score: 0.85
        explanation: Maps to the country (two-letter code) of the location.
      - name: country_code
        expression: locations.country_code
        score: 0.85
        explanation: Every expression match to a two-letter code for country.
      - name: country_name
        expression: locations.country_name
        score: 0.8
        explanation: Effectively maps to the full name of the location's country.
      - name: created_at
        expression: locations.created_at
        score: 0.9
        explanation: Accurately matches the location creation timestamp.
      - name: id
        expression: locations.id
        score: 0.85
        explanation: Correctly aligns with the ID of the location.
      - name: legacy
        expression: locations.legacy
        score: 0.8
        explanation:
          Mapped field distinctly represents a fulfillment service location
          indicator.
      - name: localized_country_name
        expression: locations.localized_country_name
        score: 0.8
        explanation: Appropriately maps to the localized country's name.
      - name: localized_province_name
        expression: locations.localized_province_name
        score: 0.7
        explanation: Matches with the localized name of the location region.
      - name: name
        expression: locations.name
        score: 0.95
        explanation: Best match for the name of the location.
      - name: phone
        expression: locations.phone
        score: 0.85
        explanation:
          Mapping corresponds to the phone number of the location with
          expected special characters.
      - name: province
        expression: locations.province
        score: 0.8
        explanation: Maps correctly to the province or state of the location.
      - name: province_code
        expression: locations.province_code
        score: 0.8
        explanation: Accurately maps to province or state's code.
      - name: updated_at
        expression: locations.updated_at
        score: 0.9
        explanation: Effectively captures the last updated timestamp for the location.
      - name: zip
        expression: locations.zip
        score: 0.85
        explanation: Directly matches with the postal code of the location.
