domain: shopify.fivetran-interop
transforms:
  - name: fulfillment
    from:
      - fulfillments: shopify.fulfillments
    fields:
      _fivetran_synced:
        expression: fulfillments._airbyte_extracted_at
        description: "{{ doc('_fivetran_synced') }}"
      created_at:
        expression: fulfillments.created_at
        description:
          The date and time when the fulfillment was created. The API returns
          this value in ISO 8601 format.
      id:
        expression: fulfillments.id
        description: The ID for the fulfillment.
      location_id:
        expression: fulfillments.location_id
        description:
          The unique identifier of the location that the fulfillment was
          processed at.
      name:
        expression: fulfillments.name
        description:
          "The uniquely identifying fulfillment name, consisting of two
          parts separated by a .. The first part represents the order name and the
          second part represents the fulfillment number.  The fulfillment number automatically
          increments depending on how many fulfillments are in an order (e.g. #1001.1,
          #1001.2).\n"
      order_id:
        expression: fulfillments.order_id
        description: The unique numeric identifier for the order.
      receipt_authorization:
        expression: fulfillments.receipt.authorization
        description: The authorization code from the receipt.
      service:
        expression: fulfillments.service
        description: The fulfillment service associated with the fulfillment.
      shipment_status:
        expression: fulfillments.shipment_status
        description:
          "The current shipment status of the fulfillment. Valid values
          include: - label_printed: A label for the shipment was purchased and printed.
          - label_purchased: A label for the shipment was purchased, but not printed.
          - attempted_delivery: Delivery of the shipment was attempted, but unable
          to be completed. - ready_for_pickup: The shipment is ready for pickup at
          a shipping depot. - confirmed: The carrier is aware of the shipment, but
          hasn't received it yet. - in_transit: The shipment is being transported
          between shipping facilities on the way to its destination. - out_for_delivery:
          The shipment is being delivered to its final destination. - delivered: The
          shipment was succesfully delivered. - failure: Something went wrong when
          pulling tracking information for the shipment, such as the tracking number
          was invalid or the shipment was canceled.\n"
      status:
        expression: fulfillments.status
        description:
          "The status of the fulfillment. Valid values include: - pending:
          Shopify has created the fulfillment and is waiting for the third-party fulfillment
          service to transition it to 'open' or 'success'. - open: The fulfillment
          has been acknowledged by the service and is in processing. - success: The
          fulfillment was successful. - cancelled: The fulfillment was cancelled.
          - error: There was an error with the fulfillment request. - failure: The
          fulfillment request failed.\n"
      tracking_company:
        expression: fulfillments.tracking_company
        description: The name of the tracking company.
      tracking_number:
        expression: fulfillments.tracking_number
        description: Primary tracking number for the order.
      tracking_numbers:
        expression: fulfillments.tracking_numbers
        description: A list of tracking numbers, provided by the shipping company.
      tracking_urls:
        expression: fulfillments.tracking_urls
        description: The URLs of tracking pages for the fulfillment.
      updated_at:
        expression: fulfillments.updated_at
        description:
          The date and time (ISO 8601 format) when the fulfillment was
          last modified.
annotations:
  approved: true
  missing_fields: []
  evaluation:
    source_stream_name: fulfillments
    target_table_name: fulfillment
    name_match_score: 0.95
    score: 0.85
    explanation:
      The table mapping was evaluated based on the given field mappings.
      The overall score is derived from individual field evaluations and the coherence
      of the mapped fields. The name match score indicates the general alignment of
      field names between the source and target, which was strong in this case.
    field_mapping_evals:
      - name: _fivetran_synced
        expression: fulfillments._airbyte_extracted_at
        score: 1.0
        explanation:
          Successfully mapped to source stream's '_airbyte_extracted_at'
          column, which was perfectly aligned with the expected field.
      - name: created_at
        expression: fulfillments.created_at
        score: 0.8
        explanation:
          The 'created_at' field mapped well to a corresponding timestamp
          field in the source.
      - name: id
        expression: fulfillments.id
        score: 0.8
        explanation: The 'id' matched a unique identifier column with high confidence.
      - name: location_id
        expression: fulfillments.location_id
        score: 0.8
        explanation:
          The 'location_id' field was mapped to a unique location identifier
          with good confidence.
      - name: name
        expression: fulfillments.name
        score: 0.6
        explanation:
          The 'name' field had a reasonable match, though less certain
          due to possible differences in naming conventions.
      - name: order_id
        expression: fulfillments.order_id
        score: 0.8
        explanation:
          The 'order_id' field was correctly mapped to a corresponding
          unique order identifier.
      - name: receipt_authorization
        expression: fulfillments.receipt.authorization
        score: 0.75
        explanation:
          The 'receipt_authorization' was closely matched to an authorization
          code field.
      - name: service
        expression: fulfillments.service
        score: 0.7
        explanation:
          The 'service' field was moderately matched, potential slight
          variations in service names.
      - name: shipment_status
        expression: fulfillments.shipment_status
        score: 0.65
        explanation:
          The 'shipment_status' was matched with consideration for multiple
          valid states.
      - name: status
        expression: fulfillments.status
        score: 0.65
        explanation:
          The 'status' field alignment was fairly good, with understanding
          of status values.
      - name: tracking_company
        expression: fulfillments.tracking_company
        score: 0.7
        explanation: Matched with a carrier or company name field for tracking.
      - name: tracking_number
        expression: fulfillments.tracking_number
        score: 0.7
        explanation: Mapped to a primary tracking number with decent accuracy.
      - name: tracking_numbers
        expression: fulfillments.tracking_numbers
        score: 0.65
        explanation: Mapped to a list of tracking numbers.
      - name: tracking_urls
        expression: fulfillments.tracking_urls
        score: 0.65
        explanation: Mapped to URLs correlating to tracking information.
      - name: updated_at
        expression: fulfillments.updated_at
        score: 0.8
        explanation:
          The 'updated_at' field aligned well with a timestamp of last
          modification.
