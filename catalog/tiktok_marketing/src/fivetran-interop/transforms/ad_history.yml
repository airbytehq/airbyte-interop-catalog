domain: tiktok_marketing.fivetran-interop
transforms:
  - name: ad_history
    from:
      - ads: tiktok_marketing.ads
    fields:
      ad_id:
        expression: ads.ad_id
        description: Ad ID
      updated_at:
        expression: ads._airbyte_extracted_at
        description: Time the record was updated.
      adgroup_id:
        expression: ads.adgroup_id
        description: Ad group ID
      advertiser_id:
        expression: ads.advertiser_id
        description: Advertiser ID
      campaign_id:
        expression: ads.campaign_id
        description: Campaign ID
      ad_name:
        expression: ads.ad_name
        description: Ad Name.
      ad_text:
        expression: ads.ad_text
        description: The ad text.
      app_name:
        expression: ads.app_name
        description: The display name of app download ad.
      call_to_action:
        expression: ads.call_to_action
        description: Call to action values.
      click_tracking_url:
        expression: ads.click_tracking_url
        description: Click monitoring URL.
      create_time:
        expression: ads.create_time
        description: Time at which the ad was created.
      display_name:
        expression: ads.display_name
        description: The display name of landing page or pure exposure ad.
      image_ids:
        expression: ads.image_ids
        description: A list of image IDs.
      impression_tracking_url:
        expression: ads.impression_tracking_url
        description: Display monitoring URL.
      is_aco:
        expression: ads.is_aco
        description: Whether the ad is an automated ad.
      is_creative_authorized:
        expression: ads.creative_authorized
        description:
          "Whether you grant displaying some of your ads in our TikTok
          For Business Creative Center. Only valid for non-US advertisers, the default
          value is false.\n"
      is_new_structure:
        expression: ads.is_new_structure
        description: Whether the campaign is a new structure.
      landing_page_url:
        expression: ads.landing_page_url
        description: Landing page URL.
      open_url:
        expression: MISSING
        description:
          The specific location where you want your audience to go if they
          have your app installed.
      opt_status:
        expression: ads.operation_status
        description: Operation status.
      playable_url:
        expression: ads.playable_url
        description: Playable material url.
      profile_image:
        expression: ads.profile_image_url
        description: Avatar URL.
      status:
        expression: MISSING
        description: Ad status.
      video_id:
        expression: ads.video_id
        description: The video ID.
annotations:
  approved: true
  missing_fields:
    - open_url
    - status
  evaluation:
    source_stream_name: ads
    target_table_name: ad_history
    name_match_score: 0.9
    score: 0.85
    explanation:
      The mapping was evaluated with a high confidence due to the clear
      and consistent use of field names across mappings. However, two fields were
      marked as 'MISSING', which affected their individual scores significantly.
    field_mapping_evals:
      - name: ad_id
        expression: ads.ad_id
        score: 0.95
        explanation: The field 'ad_id' is perfectly mapped with high confidence.
      - name: updated_at
        expression: ads._airbyte_extracted_at
        score: 0.7
        explanation:
          "'updated_at' could match '_airbyte_extracted_at' but the match
          is not perfect."
      - name: adgroup_id
        expression: ads.adgroup_id
        score: 0.9
        explanation: The field 'adgroup_id' is well mapped.
      - name: advertiser_id
        expression: ads.advertiser_id
        score: 0.9
        explanation: The field 'advertiser_id' is well mapped.
      - name: campaign_id
        expression: ads.campaign_id
        score: 0.9
        explanation: The field 'campaign_id' is well mapped.
      - name: ad_name
        expression: ads.ad_name
        score: 0.9
        explanation: The field 'ad_name' is well mapped.
      - name: ad_text
        expression: ads.ad_text
        score: 0.9
        explanation: The field 'ad_text' is well mapped.
      - name: app_name
        expression: ads.app_name
        score: 0.9
        explanation: The field 'app_name' is well mapped.
      - name: call_to_action
        expression: ads.call_to_action
        score: 0.9
        explanation: The field 'call_to_action' is well mapped.
      - name: click_tracking_url
        expression: ads.click_tracking_url
        score: 0.9
        explanation: The field 'click_tracking_url' is well mapped.
      - name: create_time
        expression: ads.create_time
        score: 0.9
        explanation: The field 'create_time' is well mapped.
      - name: display_name
        expression: ads.display_name
        score: 0.9
        explanation: The field 'display_name' is well mapped.
      - name: image_ids
        expression: ads.image_ids
        score: 0.9
        explanation: The field 'image_ids' is well mapped.
      - name: impression_tracking_url
        expression: ads.impression_tracking_url
        score: 0.9
        explanation: The field 'impression_tracking_url' is well mapped.
      - name: is_aco
        expression: ads.is_aco
        score: 0.9
        explanation: The field 'is_aco' is well mapped.
      - name: is_creative_authorized
        expression: ads.creative_authorized
        score: 0.9
        explanation: The field 'is_creative_authorized' is well mapped.
      - name: is_new_structure
        expression: ads.is_new_structure
        score: 0.9
        explanation: The field 'is_new_structure' is well mapped.
      - name: landing_page_url
        expression: ads.landing_page_url
        score: 0.9
        explanation: The field 'landing_page_url' is well mapped.
      - name: open_url
        expression: MISSING
        score: 0.0
        explanation: The field expression for 'open_url' is missing.
      - name: opt_status
        expression: ads.operation_status
        score: 0.9
        explanation: The field 'opt_status' is well mapped.
      - name: playable_url
        expression: ads.playable_url
        score: 0.9
        explanation: The field 'playable_url' is well mapped.
      - name: profile_image
        expression: ads.profile_image_url
        score: 0.9
        explanation: The field 'profile_image' is well mapped.
      - name: status
        expression: MISSING
        score: 0.0
        explanation: The field expression for 'status' is missing.
      - name: video_id
        expression: ads.video_id
        score: 0.9
        explanation: The field 'video_id' is well mapped.
