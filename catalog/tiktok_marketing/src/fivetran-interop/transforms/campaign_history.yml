domain: tiktok_marketing.fivetran-interop
transforms:
  - name: campaign_history
    from:
      - campaigns: tiktok_marketing.campaigns
    fields:
      campaign_id:
        expression: campaigns.campaign_id
        description: Campaign ID
      updated_at:
        expression: campaigns._airbyte_extracted_at
        description: Time the record was updated.
      advertiser_id:
        expression: campaigns.advertiser_id
        description: Advertiser ID
      budget:
        expression: campaigns.budget
        description: Campaign budget
      budget_mode:
        expression: campaigns.budget_mode
        description: Budget type
      campaign_name:
        expression: campaigns.campaign_name
        description: Campaign name
      campaign_type:
        expression: campaigns.campaign_type
        description:
          Campaign Type, indicates the campaign is a regular campaign or
          iOS 14 campaign.
      create_time:
        expression: campaigns.create_time
        description: Time at which the campaign was created.
      is_new_structure:
        expression: campaigns.is_new_structure
        description:
          Whether the campaign is a new structure (for the same campaign,
          the structure of campaign, adgroups and ads are the same)
      objective_type:
        expression: campaigns.objective_type
        description: Advertising objective.
      opt_status:
        expression: MISSING
        description: Operation status.
      status:
        expression: MISSING
        description: Campaign status
      split_test_variable:
        expression: campaigns.split_test_variable
        description:
          Split Test variables. Optional values; TARGETING, BIDDING_OPTIMIZATION
          , CREATIVE.
annotations:
  approved: true
  missing_fields:
    - opt_status
    - status
  evaluation:
    source_stream_name: campaigns
    target_table_name: campaign_history
    table_match_score: 0.85
    completion_score: 0.77
    explanation:
      The source table 'campaigns' matches the target schema closely with
      most fields appropriately mapped, resulting in a high table match score. However,
      missing fields 'opt_status' and 'status' reflect in a slightly lower completion
      score.
    field_mapping_evals:
      - name: campaign_id
        expression: campaigns.campaign_id
        score: 0.9
        explanation:
          The source field 'campaigns.campaign_id' is a strong match for
          'campaign_id'.
      - name: updated_at
        expression: campaigns._airbyte_extracted_at
        score: 1.0
        explanation:
          The source field 'campaigns._airbyte_extracted_at' is a required
          standard mapping for '_fivetran_synced', thus always scores 1.00.
      - name: advertiser_id
        expression: campaigns.advertiser_id
        score: 0.9
        explanation:
          The source field 'campaigns.advertiser_id' is a strong match
          for 'advertiser_id'.
      - name: budget
        expression: campaigns.budget
        score: 0.9
        explanation: The source field 'campaigns.budget' is a strong match for 'budget'.
      - name: budget_mode
        expression: campaigns.budget_mode
        score: 0.9
        explanation:
          The source field 'campaigns.budget_mode' is a strong match for
          'budget_mode'.
      - name: campaign_name
        expression: campaigns.campaign_name
        score: 0.9
        explanation:
          The source field 'campaigns.campaign_name' is a strong match
          for 'campaign_name'.
      - name: campaign_type
        expression: campaigns.campaign_type
        score: 0.9
        explanation:
          The source field 'campaigns.campaign_type' is a strong match
          for 'campaign_type'.
      - name: create_time
        expression: campaigns.create_time
        score: 0.9
        explanation:
          The source field 'campaigns.create_time' is a strong match for
          'create_time'.
      - name: is_new_structure
        expression: campaigns.is_new_structure
        score: 0.9
        explanation:
          The source field 'campaigns.is_new_structure' is a strong match
          for 'is_new_structure'.
      - name: objective_type
        expression: campaigns.objective_type
        score: 0.9
        explanation:
          The source field 'campaigns.objective_type' is a strong match
          for 'objective_type'.
      - name: opt_status
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: status
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: split_test_variable
        expression: campaigns.split_test_variable
        score: 0.7
        explanation:
          The source field 'campaigns.split_test_variable' is likely a
          match for 'split_test_variable' but with some uncertainty.
