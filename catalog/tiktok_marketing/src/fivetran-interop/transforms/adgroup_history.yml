domain: tiktok_marketing.fivetran-interop
transforms:
  - name: adgroup_history
    from:
      - ad_groups: tiktok_marketing.ad_groups
    fields:
      adgroup_id:
        expression: ad_groups.adgroup_id
        description: Ad group ID
      updated_at:
        expression: ad_groups.modify_time
        description: Time the record was updated.
      advertiser_id:
        expression: ad_groups.advertiser_id
        description: Advertiser ID
      campaign_id:
        expression: ad_groups.campaign_id
        description: The Ad group's campaign ID.
      action_categories:
        expression: MISSING
        description: IDs of the action categories (behaviors) that you want to target.
      action_days:
        expression: MISSING
        description: The number of days of the time period to include action from.
      adgroup_name:
        expression: ad_groups.adgroup_name
        description: Ad group name. Character limit is 512 and cannot contain emoji.
      age_groups:
        expression: MISSING
        description:
          "Age groups you want to target. This is the newest version of
          the field `age`, which was renamed after the Tiktok Ads v1.3 API release.\n"
      android_osv:
        expression: ad_groups.min_android_version
        description: Minimum Android version.
      app_download_url:
        expression: ad_groups.app_download_url
        description: App download link
      app_id:
        expression: ad_groups.app_id
        description: The Application id of the promoted app
      app_name:
        expression: MISSING
        description: App name.
      app_type:
        expression: ad_groups.app_type
        description: App type.
      audience:
        expression: MISSING
        description: A list of audience IDs.
      audience_type:
        expression: ad_groups.audience_type
        description: Audience Type
      bid:
        expression: MISSING
        description: CPC, CPM bidding, oCPM learning bidding
      bid_type:
        expression: MISSING
        description: Bidding Strategy
      billing_event:
        expression: ad_groups.billing_event
        description: Bid method.
      budget:
        expression: ad_groups.budget
        description:
          Ad budget. Returns 0.0 when Campaign Budget Optimization (budget_optimize_switch)
          is on.
      budget_mode:
        expression: ad_groups.budget_mode
        description:
          Budget mode. This field will be ignored when Campaign Budget
          Optimization (budget_optimize_switch) is enabled.
      carriers:
        expression: ad_groups.carriers
        description: Carriers that you want to target.
      category:
        expression: ad_groups.category_id
        description: Ad group category.
      click_tracking_url:
        expression: MISSING
        description: Click monitoring URL.
      connection_type:
        expression: MISSING
        description: Device connection types that you want to target. Default; unlimited.
      conversion_bid:
        expression: MISSING
        description: oCPM conversion bid
      cpv_video_duration:
        expression: MISSING
        description:
          "Video playback duration, required if optimize_goal is VIDEO_VIEW.\
          \  Allowed values; SIX_SECONDS (video playback 6s), TWO_SECONDS (video playback
          2s)\n"
      creative_material_mode:
        expression: ad_groups.creative_material_mode
        description: Creative delivery mode.
      dayparting:
        expression: MISSING
        description:
          Ad delivery period, the default is always and the format is 48
          * 7 character string, represented by 0 or 1. > That is, with half an hour
          as the minimum granularity, a day (24 hours) is divided by the minimum granularity(30
          mins) from Monday to Sunday. Resulting in a 48*7 format.0 represents not
          to be delivered, 1 represents delivery. no transmission, full transmission
          0, full transmission 1 all represent full time delivery
      deep_bid_type:
        expression: MISSING
        description: Bidding strategy for in-app events.
      deep_cpabid:
        expression: MISSING
        description: Deep bid
      deep_external_action:
        expression: MISSING
        description: Deep conversion event.
      display_name:
        expression: MISSING
        description: Display name of ad group.
      enable_inventory_filter:
        expression: ad_groups.inventory_filter_enabled
        description: Inventory filtering (Unsafe videos will not be displayed).
      excluded_audience:
        expression: MISSING
        description: A list of audience ID to be excluded.
      external_action:
        expression: MISSING
        description:
          Conversion event for the ad group. It is required when the promoted
          object is an app with tracking urls, or when pixel_id is specified.
      fallback_type:
        expression: MISSING
        description:
          "Fallback Type. If the audience do not have the app installed,
          you can have them fall back to install the app, or to view a specific web
          page. Not applicable for Deferred Deeplink. Allowed values; APP_INSTALL,
          WEBSITE, UNSET. If website is chosen, you need to specify the url via landing_page_url
          field.\n"
      frequency:
        expression: ad_groups.frequency
        description:
          "frequency, together with frequency_schedule, controls how often
          people see your ad (only available for REACH ads).  For example, frequency
          = 2 frequency_schedule = 3 means \"show ads no more than twice every 3 day\"\
          .\n"
      frequency_schedule:
        expression: ad_groups.frequency_schedule
        description:
          frequency, together with frequency, controls how often people
          see your ad (only available for REACH ads).
      gender:
        expression: ad_groups.gender
        description: Gender that you want to target.
      impression_tracking_url:
        expression: MISSING
        description: Display monitoring URL.
      interest_category_v2:
        expression: ad_groups.interest_category_ids
        description:
          Interest classification. If the interest is specified, users
          that do not meet interest target will be excluded during delivery.
      ios_osv:
        expression: ad_groups.min_ios_version
        description: Minimum iOS version.
      is_comment_disable:
        expression: ad_groups.comment_disabled
        description: Whether to allow comments on your ads on TikTok, Vigo, Helo.
      is_hfss:
        expression: ad_groups.is_hfss
        description:
          Whether the promoted content is HFSS foods (foods that are high
          in fat, salt, or sugar).
      is_new_structure:
        expression: ad_groups.is_new_structure
        description: Whether the campaign is a new structure.
      keywords:
        expression: ad_groups.keywords
        description: Keywords used.
      landing_page_url:
        expression: MISSING
        description: Landing page URL.
      languages:
        expression: ad_groups.languages
        description: Codes of the languages that you want to target.
      location:
        expression: ad_groups.location_ids
        description: IDs of the locations that you want to target.
      open_url:
        expression: ad_groups.promotion_website_type
        description:
          The specific location where you want your audience to go if they
          have your app installed.
      open_url_type:
        expression: MISSING
        description: The open URL type.
      operation_system:
        expression: ad_groups.operating_systems
        description: Device operating systems that you want to target.
      opt_status:
        expression: ad_groups.operation_status
        description: Operation status.
      optimize_goal:
        expression: ad_groups.optimization_goal
        description: Optimization goal.
      pacing:
        expression: ad_groups.pacing
        description:
          "You can choose between PACING_MODE_SMOOTH and PACING_MODE_FAST.
          For PACING_MODE_SMOOTH, the budget is allocated evenly within the scheduled
          time.  PACING_MODE_FAST would consume budget and produce results as soon
          as possible. \n"
      package:
        expression: MISSING
        description: Package name.
      pangle_block_app_list_id:
        expression: MISSING
        description: Pangle app block list ID.
      pixel_id:
        expression: ad_groups.pixel_id
        description: Pixel ID. Only application for landing pages.
      placement:
        expression: MISSING
        description: The apps where you want to deliver your ads.
      placement_type:
        expression: ad_groups.placement_type
        description: Placement type.
      profile_image:
        expression: MISSING
        description: Avatar URL.
      schedule_end_time:
        expression: ad_groups.schedule_end_time
        description: Ad delivery end time (UTC+0). Format should be YYYY-MM-DD HH:MM:SS
      schedule_start_time:
        expression: ad_groups.schedule_start_time
        description: Ad delivery start time (UTC+0). Format should be YYYY-MM-DD HH:MM:SS
      schedule_type:
        expression: ad_groups.schedule_type
        description:
          The schedule type, which can be either SCHEDULE_START_END or
          SCHEDULE_FROM_NOW.
      skip_learning_phase:
        expression: MISSING
        description: Whether to skip the learning stage.
      statistic_type:
        expression: MISSING
        description: conversion bid statistic type
      status:
        expression: MISSING
        description: Ad group status
      video_actions:
        expression: ad_groups.video_actions
        description: Number of video actions.
      video_download:
        expression: ad_groups.video_download_disabled
        description:
          Whether users can download your video ads on TikTok(cannot be
          updated once created).
annotations:
  approved: false
  missing_fields:
    - action_categories
    - action_days
    - age_groups
    - app_name
    - audience
    - bid
    - bid_type
    - click_tracking_url
    - connection_type
    - conversion_bid
    - cpv_video_duration
    - dayparting
    - deep_bid_type
    - deep_cpabid
    - deep_external_action
    - display_name
    - excluded_audience
    - external_action
    - fallback_type
    - impression_tracking_url
    - landing_page_url
    - open_url_type
    - package
    - pangle_block_app_list_id
    - placement
    - profile_image
    - skip_learning_phase
    - statistic_type
    - status
  evaluation:
    source_stream_name: ad_groups
    target_table_name: adgroup_history
    name_match_score: 0.7
    score: 0.65
    explanation:
      Overall confidence score is moderate due to the presence of several
      fields with missing mappings. Perfect mappings contributed significantly to
      the confidence score. However, numerous fields lacked appropriate mappings which
      impacted the overall score negatively.
    field_mapping_evals:
      - name: adgroup_id
        expression: ad_groups.adgroup_id
        score: 1.0
        explanation: Perfect mapping.
      - name: updated_at
        expression: ad_groups.modify_time
        score: 1.0
        explanation: Perfect mapping.
      - name: advertiser_id
        expression: ad_groups.advertiser_id
        score: 1.0
        explanation: Perfect mapping.
      - name: campaign_id
        expression: ad_groups.campaign_id
        score: 1.0
        explanation: Perfect mapping.
      - name: action_categories
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: action_days
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: adgroup_name
        expression: ad_groups.adgroup_name
        score: 1.0
        explanation: Perfect mapping.
      - name: age_groups
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: android_osv
        expression: ad_groups.min_android_version
        score: 1.0
        explanation: Perfect mapping.
      - name: app_download_url
        expression: ad_groups.app_download_url
        score: 1.0
        explanation: Perfect mapping.
      - name: app_id
        expression: ad_groups.app_id
        score: 1.0
        explanation: Perfect mapping.
      - name: app_name
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: app_type
        expression: ad_groups.app_type
        score: 1.0
        explanation: Perfect mapping.
      - name: audience
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: audience_type
        expression: ad_groups.audience_type
        score: 1.0
        explanation: Perfect mapping.
      - name: bid
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: bid_type
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: billing_event
        expression: ad_groups.billing_event
        score: 1.0
        explanation: Perfect mapping.
      - name: budget
        expression: ad_groups.budget
        score: 1.0
        explanation: Perfect mapping.
      - name: budget_mode
        expression: ad_groups.budget_mode
        score: 1.0
        explanation: Perfect mapping.
      - name: carriers
        expression: ad_groups.carriers
        score: 1.0
        explanation: Perfect mapping.
      - name: category
        expression: ad_groups.category_id
        score: 1.0
        explanation: Perfect mapping.
      - name: click_tracking_url
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: connection_type
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: conversion_bid
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: cpv_video_duration
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: creative_material_mode
        expression: ad_groups.creative_material_mode
        score: 1.0
        explanation: Perfect mapping.
      - name: dayparting
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: deep_bid_type
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: deep_cpabid
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: deep_external_action
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: display_name
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: enable_inventory_filter
        expression: ad_groups.inventory_filter_enabled
        score: 1.0
        explanation: Perfect mapping.
      - name: excluded_audience
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: external_action
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: fallback_type
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: frequency
        expression: ad_groups.frequency
        score: 1.0
        explanation: Perfect mapping.
      - name: frequency_schedule
        expression: ad_groups.frequency_schedule
        score: 1.0
        explanation: Perfect mapping.
      - name: gender
        expression: ad_groups.gender
        score: 1.0
        explanation: Perfect mapping.
      - name: impression_tracking_url
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: interest_category_v2
        expression: ad_groups.interest_category_ids
        score: 1.0
        explanation: Perfect mapping.
      - name: ios_osv
        expression: ad_groups.min_ios_version
        score: 1.0
        explanation: Perfect mapping.
      - name: is_comment_disable
        expression: ad_groups.comment_disabled
        score: 1.0
        explanation: Perfect mapping.
      - name: is_hfss
        expression: ad_groups.is_hfss
        score: 1.0
        explanation: Perfect mapping.
      - name: is_new_structure
        expression: ad_groups.is_new_structure
        score: 1.0
        explanation: Perfect mapping.
      - name: keywords
        expression: ad_groups.keywords
        score: 1.0
        explanation: Perfect mapping.
      - name: landing_page_url
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: languages
        expression: ad_groups.languages
        score: 1.0
        explanation: Perfect mapping.
      - name: location
        expression: ad_groups.location_ids
        score: 1.0
        explanation: Perfect mapping.
      - name: open_url
        expression: ad_groups.promotion_website_type
        score: 1.0
        explanation: Perfect mapping.
      - name: open_url_type
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: operation_system
        expression: ad_groups.operating_systems
        score: 1.0
        explanation: Perfect mapping.
      - name: opt_status
        expression: ad_groups.operation_status
        score: 1.0
        explanation: Perfect mapping.
      - name: optimize_goal
        expression: ad_groups.optimization_goal
        score: 1.0
        explanation: Perfect mapping.
      - name: pacing
        expression: ad_groups.pacing
        score: 1.0
        explanation: Perfect mapping.
      - name: package
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: pangle_block_app_list_id
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: pixel_id
        expression: ad_groups.pixel_id
        score: 1.0
        explanation: Perfect mapping.
      - name: placement
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: placement_type
        expression: ad_groups.placement_type
        score: 1.0
        explanation: Perfect mapping.
      - name: profile_image
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: schedule_end_time
        expression: ad_groups.schedule_end_time
        score: 1.0
        explanation: Perfect mapping.
      - name: schedule_start_time
        expression: ad_groups.schedule_start_time
        score: 1.0
        explanation: Perfect mapping.
      - name: schedule_type
        expression: ad_groups.schedule_type
        score: 1.0
        explanation: Perfect mapping.
      - name: skip_learning_phase
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: statistic_type
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: status
        expression: MISSING
        score: 0.0
        explanation: Expression is 'MISSING'.
      - name: video_actions
        expression: ad_groups.video_actions
        score: 1.0
        explanation: Perfect mapping.
      - name: video_download
        expression: ad_groups.video_download_disabled
        score: 1.0
        explanation: Perfect mapping.
