domain: hubspot.fivetran-interop
transforms:
  - name: form
    from:
      - forms: hubspot.forms
    fields:
      _fivetran_deleted:
        expression: MISSING
        description: '{{ doc("_fivetran_deleted") }}'
      _fivetran_synced:
        expression: forms._airbyte_extracted_at
        description: '{{ doc("_fivetran_synced") }}'
      created_at:
        expression: forms.createdAt
        description: A timestamp for when the form was created.
      css_class:
        expression: forms.displayOptions.cssClass
        description: The CSS classes assigned to the form.
      follow_up_id:
        expression: MISSING
        description: This field is no longer used.
      guid:
        expression: MISSING
        description: The internal ID of the form.
      lead_nurturing_campaign_id:
        expression: forms.properties.hs_marketing_campaign_guid
        description: TBD
      method:
        expression: MISSING
        description: This field is no longer used.
      name:
        expression: forms.name
        description: The name of the form.
      notify_recipients:
        expression: forms.configuration.notifyRecipients
        description: "A comma-separated list of user IDs that should receive submission
          notifications.\nEmail addresses will be returned for individuals who aren't
          users.\n"
      portal_id:
        expression: MISSING
        description: '{{ doc("portal_id") }}'
      redirect:
        expression: forms.configuration.postSubmitAction.value
        description: The URL that the visitor will be redirected to after filling
          out the form.
      submit_text:
        expression: forms.displayOptions.submitButtonText
        description: The text used for the submit button.
      updated_at:
        expression: forms.updatedAt
        description: A timestamp for when the form was last updated.
annotations:
  approved: false
  missing_fields:
    - _fivetran_deleted
    - follow_up_id
    - guid
    - method
    - portal_id
  evaluation:
    source_stream_name: forms
    target_table_name: form
    table_match_score: 0.9
    completion_score: 0.69
    explanation: The table mapping score is high because the tables share many common
      fields, indicating they likely describe similar subjects. However, the completion
      score is lower due to several fields mapped as 'MISSING'.
    field_mapping_evals:
      - name: _fivetran_deleted
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: _fivetran_synced
        expression: forms._airbyte_extracted_at
        score: 1.0
        explanation: Consistently maps to '_airbyte_extracted_at'.
      - name: created_at
        expression: forms.createdAt
        score: 0.8
        explanation: Mapped to a corresponding timestamp for creation within forms.
      - name: css_class
        expression: forms.displayOptions.cssClass
        score: 0.7
        explanation: Assigned CSS classes are mapped to a similarly structured path.
      - name: follow_up_id
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: guid
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: lead_nurturing_campaign_id
        expression: forms.properties.hs_marketing_campaign_guid
        score: 0.6
        explanation: Mapping to a marketing campaign GUID is a possible but uncertain
          match.
      - name: method
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: name
        expression: forms.name
        score: 0.9
        explanation: Mapped directly to the form's name, indicating a strong match.
      - name: notify_recipients
        expression: forms.configuration.notifyRecipients
        score: 0.8
        explanation: Correctly identifies a list of user IDs for notifications within
          the forms.
      - name: portal_id
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: redirect
        expression: forms.configuration.postSubmitAction.value
        score: 0.8
        explanation: Mapped to a post-submit URL, reflecting the described functionality.
      - name: submit_text
        expression: forms.displayOptions.submitButtonText
        score: 0.7
        explanation: Submit button text mapping aligns with function.
      - name: updated_at
        expression: forms.updatedAt
        score: 0.8
        explanation: Mapped to a corresponding timestamp for updates within forms.
