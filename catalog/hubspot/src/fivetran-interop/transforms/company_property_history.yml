domain: hubspot.fivetran-interop
transforms:
  - name: company_property_history
    from:
      - companies_property_history: hubspot.companies_property_history
    fields:
      _fivetran_synced:
        expression: companies_property_history._airbyte_extracted_at
        description: '{{ doc("_fivetran_synced") }}'
      company_id:
        expression: companies_property_history.companyId
        description: The ID of the related company record.
      name:
        expression: companies_property_history.properties.name
        description: '{{ doc("history_name") }}'
      source:
        expression: companies_property_history.sourceType
        description: '{{ doc("history_source") }}'
      source_id:
        expression: companies_property_history.sourceId
        description: '{{ doc("history_source_id") }}'
      timestamp:
        expression: companies_property_history.timestamp
        description: '{{ doc("history_timestamp") }}'
      value:
        expression: companies_property_history.value
        description: '{{ doc("history_value") }}'
annotations:
  approved: true
  missing_fields: []
  evaluation:
    source_stream_name: companies_property_history
    target_table_name: company_property_history
    table_match_score: 0.8
    completion_score: 0.85
    explanation:
      The table match is strong due to the consistent naming and field
      availability between the source and target. All fields have been mapped with
      high confidence except for any potential 'MISSING' fields, which slightly lowers
      the completion score.
    field_mapping_evals:
      - name: _fivetran_synced
        expression: companies_property_history._airbyte_extracted_at
        score: 1.0
        explanation: Standard mapping of '_fivetran_synced' to '_airbyte_extracted_at'.
      - name: company_id
        expression: companies_property_history.companyId
        score: 0.95
        explanation: High confidence mapping based on consistent naming and usage.
      - name: name
        expression: companies_property_history.properties.name
        score: 0.7
        explanation: Reasonable match based on naming convention and context.
      - name: source
        expression: companies_property_history.sourceType
        score: 0.7
        explanation: Reasonable match based on naming convention and context.
      - name: source_id
        expression: companies_property_history.sourceId
        score: 0.7
        explanation: Reasonable match based on naming convention and context.
      - name: timestamp
        expression: companies_property_history.timestamp
        score: 0.95
        explanation: High confidence due to common timestamp usage across schemas.
      - name: value
        expression: companies_property_history.value
        score: 0.85
        explanation: Strong match supported by consistent usage across data sources.
