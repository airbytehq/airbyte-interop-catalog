domain: hubspot.fivetran-interop
transforms:
  - name: contact_form_submission
    from:
      - contacts_form_submissions: hubspot.contacts_form_submissions
    fields:
      _fivetran_synced:
        expression: contacts_form_submissions._airbyte_extracted_at
        description: '{{ doc("_fivetran_synced") }}'
      contact_id:
        expression: MISSING
        description: The ID of the related contact.
      conversion_id:
        expression: contacts_form_submissions.conversion_id
        description: A Unique ID for the specific form conversion.
      form_id:
        expression: contacts_form_submissions.form_id
        description: The GUID of the form that the submission belongs to.
      page_url:
        expression: contacts_form_submissions.canonical_url
        description: The URL that the form was submitted on, if applicable.
      portal_id:
        expression: contacts_form_submissions.portal_id
        description: '{{ doc("portal_id") }}'
      timestamp:
        expression: contacts_form_submissions.timestamp
        description: A Unix timestamp in milliseconds of the time the submission occurred.
      title:
        expression: contacts_form_submissions.page_title
        description:
          The title of the page that the form was submitted on. This will
          default to the name of the form if no title is provided.
annotations:
  approved: true
  missing_fields:
    - contact_id
  evaluation:
    source_stream_name: contacts_form_submissions
    target_table_name: contact_form_submission
    table_match_score: 0.8
    completion_score: 0.875
    explanation:
      The table match confidence is high due to the presence of common
      fields in the source and target tables, such as conversion_id and form_id, which
      are indicative of form submissions. However, the completion is partly reduced
      as a result of a 'MISSING' field and some other mapped fields having a close
      match score instead of perfect.
    field_mapping_evals:
      - name: _fivetran_synced
        expression: contacts_form_submissions._airbyte_extracted_at
        score: 1.0
        explanation:
          The field '_fivetran_synced' is correctly mapped to '_airbyte_extracted_at'
          as per standard mapping rules.
      - name: contact_id
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: conversion_id
        expression: contacts_form_submissions.conversion_id
        score: 0.7
        explanation:
          Close confidence since 'conversion_id' appears to match correctly
          with the source.
      - name: form_id
        expression: contacts_form_submissions.form_id
        score: 0.7
        explanation:
          Reasonable confidence as 'form_id' corresponds within the submission
          context.
      - name: page_url
        expression: contacts_form_submissions.canonical_url
        score: 0.7
        explanation:
          Matches with 'canonical_url' reasonably well for a form submission
          context.
      - name: portal_id
        expression: contacts_form_submissions.portal_id
        score: 0.7
        explanation: Field 'portal_id' mapped with standard naming conventions.
      - name: timestamp
        expression: contacts_form_submissions.timestamp
        score: 0.7
        explanation:
          Field 'timestamp' appears to match the context of form submission
          times.
      - name: title
        expression: contacts_form_submissions.page_title
        score: 0.7
        explanation: Field 'title' matches the common context in form submission metadata.
