domain: hubspot.fivetran-interop
transforms:
  - name: ticket
    from:
      - tickets: hubspot.tickets
    fields:
      _fivetran_synced:
        expression: tickets._airbyte_extracted_at
        description: '{{ doc("_fivetran_synced") }}'
      id:
        expression: tickets.id
        description: ID of the ticket.
      is_deleted:
        expression: tickets.archived
        description: Whether the record was deleted (v2 endpoint).
      _fivetran_deleted:
        expression: tickets.archived
        description: Whether the record was deleted (v3 endpoint).
      portal_id:
        expression: MISSING
        description: '{{ doc("portal_id") }}'
      property_closed_date:
        expression: tickets.properties.closed_date
        description: The date the ticket was closed.
      property_createdate:
        expression: tickets.properties.createdate
        description: The date the ticket was created.
      property_first_agent_reply_date:
        expression: tickets.properties.first_agent_reply_date
        description: the date for the first agent reply on the ticket.
      property_hs_pipeline:
        expression: tickets.properties.hs_pipeline
        description: The ID of the ticket's pipeline.
      property_hs_pipeline_stage:
        expression: tickets.properties.hs_pipeline_stage
        description: The ID of the ticket's pipeline stage.
      property_hs_ticket_priority:
        expression: tickets.properties.hs_ticket_priority
        description: The priority of the ticket.
      property_hs_ticket_category:
        expression: tickets.properties.hs_ticket_category
        description: The category of the ticket.
      property_hubspot_owner_id:
        expression: tickets.properties.hubspot_owner_id
        description: The ID of the deal's owner.
      property_subject:
        expression: tickets.properties.subject
        description: Short summary of ticket.
      property_content:
        expression: tickets.properties.content
        description: Text in body of the ticket.
annotations:
  approved: false
  missing_fields:
    - portal_id
  evaluation:
    source_stream_name: tickets
    target_table_name: ticket
    name_match_score: 0.7
    score: 0.55
    explanation:
      Overall confidence score calculated based on individual field mapping
      evaluations. The presence of a MISSING expression significantly reduces confidence,
      and care is taken to ensure named fields correspond correctly.
    field_mapping_evals:
      - name: _fivetran_synced
        expression: tickets._airbyte_extracted_at
        score: 1.0
        explanation: Mapped to source stream's '_airbyte_extracted_at', which is correct.
      - name: id
        expression: tickets.id
        score: 0.7
        explanation: Direct mapping is likely correct, but has potential ambiguity.
      - name: is_deleted
        expression: tickets.archived
        score: 0.7
        explanation:
          Could mean the same as 'archived', but context likely suggests
          correct mapping.
      - name: _fivetran_deleted
        expression: tickets.archived
        score: 0.7
        explanation:
          Could mean the same as 'archived', but context likely suggests
          correct mapping.
      - name: portal_id
        expression: MISSING
        score: 0.0
        explanation: Expression is MISSING, indicating no valid mapping.
      - name: property_closed_date
        expression: tickets.properties.closed_date
        score: 0.7
        explanation: Likely a correct mapping based on name and context matching.
      - name: property_createdate
        expression: tickets.properties.createdate
        score: 0.7
        explanation: Likely a correct mapping based on name and context matching.
      - name: property_first_agent_reply_date
        expression: tickets.properties.first_agent_reply_date
        score: 0.7
        explanation: Likely a correct mapping based on name and context matching.
      - name: property_hs_pipeline
        expression: tickets.properties.hs_pipeline
        score: 0.7
        explanation: Likely a correct mapping based on name and context matching.
      - name: property_hs_pipeline_stage
        expression: tickets.properties.hs_pipeline_stage
        score: 0.7
        explanation: Likely a correct mapping based on name and context matching.
      - name: property_hs_ticket_priority
        expression: tickets.properties.hs_ticket_priority
        score: 0.7
        explanation: Likely a correct mapping based on name and context matching.
      - name: property_hs_ticket_category
        expression: tickets.properties.hs_ticket_category
        score: 0.7
        explanation: Likely a correct mapping based on name and context matching.
      - name: property_hubspot_owner_id
        expression: tickets.properties.hubspot_owner_id
        score: 0.7
        explanation: Likely a correct mapping based on name and context matching.
      - name: property_subject
        expression: tickets.properties.subject
        score: 0.7
        explanation: Likely a correct mapping based on name and context matching.
      - name: property_content
        expression: tickets.properties.content
        score: 0.7
        explanation: Likely a correct mapping based on name and context matching.
