domain: hubspot.fivetran-interop
transforms:
  - name: email_subscription_change
    from:
      - subscription_changes: hubspot.subscription_changes
    fields:
      _fivetran_synced:
        expression: subscription_changes._airbyte_extracted_at
        description: '{{ doc("_fivetran_synced") }}'
      caused_by_event_id:
        expression: MISSING
        description: The ID of the event that caused the subscription change.
      change:
        expression: subscription_changes.changes
        description:
          The change which occurred. This enumeration is specific to the
          'changeType'; see below for the possible values.
      change_type:
        expression: MISSING
        description: The type of change which occurred.
      email_subscription_id:
        expression: MISSING
        description: The ID of the related email subscription.
      portal_id:
        expression: subscription_changes.portalId
        description: '{{ doc("portal_id") }}'
      recipient:
        expression: subscription_changes.recipient
        description: The email address of the related contact.
      source:
        expression: MISSING
        description: The source of the subscription change.
      timestamp:
        expression: subscription_changes.timestamp
        description:
          The timestamp when this change occurred. If 'causedByEvent' is
          present, this will be absent.
