domain: hubspot.fivetran-interop
transforms:
  - name: deal
    from:
      - deals: hubspot.deals
    fields:
      deal_id:
        expression: deals.properties.hs_object_id
        description: The ID of the deal.
      is_deleted:
        expression: MISSING
        description: Whether the record was deleted.
      portal_id:
        expression: MISSING
        description: '{{ doc("portal_id") }}'
      deal_pipeline_id:
        expression: MISSING
        description: The ID of the deal's pipeline.
      deal_pipeline_stage_id:
        expression: deals.properties.dealstage
        description: The ID of the deal's pipeline stage.
      owner_id:
        expression: deals.properties_hubspot_owner_id
        description: The ID of the deal's owner.
      property_dealname:
        expression: deals.properties.dealname
        description: The name you have given this deal.
      property_description:
        expression: deals.properties.description
        description: A brief description of the deal.
      property_amount:
        expression: deals.properties.amount
        description: The total value of the deal in the deal's currency.
      property_closedate:
        expression: deals.properties.closedate
        description: The day the deal is expected to close, or was closed.
      property_createdate:
        expression: deals.properties.createdate
        description: The date the deal was created. This property is set automatically
          by HubSpot.
annotations:
  approved: false
  missing_fields:
    - deal_pipeline_id
    - is_deleted
    - portal_id
  evaluation:
    source_stream_name: deals
    target_table_name: deal
    table_match_score: 0.75
    completion_score: 0.7
    explanation: The table mapping reflects a generally good match between source
      and target tables, as most fields are correctly mapped. However, there are a
      few fields that could not be matched and are marked as 'MISSING', which affects
      completion.
    field_mapping_evals:
      - name: deal_id
        expression: deals.properties.hs_object_id
        score: 0.9
        explanation: Matched field 'deal_id' confidently.
      - name: is_deleted
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: portal_id
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: deal_pipeline_id
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: deal_pipeline_stage_id
        expression: deals.properties.dealstage
        score: 0.85
        explanation: Matched field 'deal_pipeline_stage_id' confidently.
      - name: owner_id
        expression: deals.properties_hubspot_owner_id
        score: 0.85
        explanation: Matched field 'owner_id' confidently.
      - name: property_dealname
        expression: deals.properties.dealname
        score: 0.9
        explanation: Matched field 'property_dealname' confidently.
      - name: property_description
        expression: deals.properties.description
        score: 0.9
        explanation: Matched field 'property_description' confidently.
      - name: property_amount
        expression: deals.properties.amount
        score: 0.9
        explanation: Matched field 'property_amount' confidently.
      - name: property_closedate
        expression: deals.properties.closedate
        score: 0.9
        explanation: Matched field 'property_closedate' confidently.
      - name: property_createdate
        expression: deals.properties.createdate
        score: 0.9
        explanation: Matched field 'property_createdate' confidently.
