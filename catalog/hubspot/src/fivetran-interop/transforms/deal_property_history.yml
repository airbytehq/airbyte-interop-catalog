domain: hubspot.fivetran-interop
transforms:
  - name: deal_property_history
    from:
      - deals_property_history: hubspot.deals_property_history
    fields:
      _fivetran_synced:
        expression: deals_property_history._airbyte_extracted_at
        description: '{{ doc("_fivetran_synced") }}'
      deal_id:
        expression: deals_property_history.dealId
        description: The ID of the related deal record.
      name:
        expression: MISSING
        description: '{{ doc("history_name") }}'
      source:
        expression: deals_property_history.sourceType
        description: '{{ doc("history_source") }}'
      source_id:
        expression: deals_property_history.sourceId
        description: '{{ doc("history_source_id") }}'
      timestamp:
        expression: deals_property_history.timestamp
        description: '{{ doc("history_timestamp") }}'
      value:
        expression: deals_property_history.value
        description: '{{ doc("history_value") }}'
annotations:
  approved: true
  missing_fields:
    - name
  evaluation:
    source_stream_name: deals_property_history
    target_table_name: deal_property_history
    table_match_score: 0.72
    completion_score: 0.857
    explanation: The table match score is relatively high, indicating a good match
      between source and target tables based on similar schema elements. However,
      one field has an expression marked as 'MISSING', lowering the completion score
      due to incomplete mapping.
    field_mapping_evals:
      - name: _fivetran_synced
        expression: deals_property_history._airbyte_extracted_at
        score: 1.0
        explanation: Standard mapping for _fivetran_synced to _airbyte_extracted_at.
      - name: deal_id
        expression: deals_property_history.dealId
        score: 0.7
        explanation: dealId from deals_property_history is likely to match deal_id
          based on naming and context.
      - name: name
        expression: MISSING
        score: 0.0
        explanation: No good match found.
      - name: source
        expression: deals_property_history.sourceType
        score: 0.7
        explanation: sourceType from deals_property_history matches source based on
          name and typical usage.
      - name: source_id
        expression: deals_property_history.sourceId
        score: 0.7
        explanation: sourceId from deals_property_history matches source_id based
          on naming similarities.
      - name: timestamp
        expression: deals_property_history.timestamp
        score: 0.7
        explanation: timestamp from deals_property_history matches timestamp based
          on naming conventions.
      - name: value
        expression: deals_property_history.value
        score: 0.7
        explanation: value from deals_property_history matches value, typical mapping
          based on name.
