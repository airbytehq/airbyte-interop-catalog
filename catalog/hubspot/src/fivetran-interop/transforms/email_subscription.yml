domain: hubspot.fivetran-interop
transforms:
  - name: email_subscription
    from:
      - email_subscriptions: hubspot.email_subscriptions
    fields:
      _fivetran_synced:
        expression: email_subscriptions._airbyte_extracted_at
        description: '{{ doc("_fivetran_synced") }}'
      active:
        expression: email_subscriptions.active
        description: Whether the subscription is active.
      description:
        expression: email_subscriptions.description
        description: The description of the subscription.
      id:
        expression: email_subscriptions.id
        description: The ID of the email subscription.
      name:
        expression: email_subscriptions.name
        description: The name of the email subscription.
      portal_id:
        expression: email_subscriptions.portalId
        description: '{{ doc("portal_id") }}'
annotations:
  approved: true
  missing_fields: []
  evaluation:
    source_stream_name: email_subscriptions
    target_table_name: email_subscription
    name_match_score: 0.75
    score: 0.8
    explanation:
      Confidence scores are determined based on how closely the field mappings
      match expected patterns and known fields. The mapping for '_fivetran_synced'
      has a high score as it perfectly maps to the expected '_airbyte_extracted_at'.
      Other fields like 'active', 'description', and 'id' are straightforward and
      receive high confidence. The 'name' and 'portal_id' fields also match well,
      but slightly less precisely.
    field_mapping_evals:
      - name: _fivetran_synced
        expression: email_subscriptions._airbyte_extracted_at
        score: 1.0
        explanation:
          Perfect mapping to '_airbyte_extracted_at', as expected for sync
          timing fields.
      - name: active
        expression: email_subscriptions.active
        score: 0.9
        explanation:
          Direct mapping to a field indicating active status, which is
          common in subscriptions.
      - name: description
        expression: email_subscriptions.description
        score: 0.9
        explanation:
          Description field matches well with the expected field in the
          source.
      - name: id
        expression: email_subscriptions.id
        score: 0.9
        explanation:
          ID fields are typically direct mappings when they exist in source
          tables.
      - name: name
        expression: email_subscriptions.name
        score: 0.7
        explanation: The 'name' field matches, but names can occasionally vary significantly.
      - name: portal_id
        expression: email_subscriptions.portalId
        score: 0.6
        explanation:
          Mapped to 'portalId', which may vary in naming conventions. Slightly
          lower confidence.
